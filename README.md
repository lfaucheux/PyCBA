# PyLUCCBA
A Land-Use-Change Cost-Benefit-Analysis calculator coded in python.

## Value of the data
•	The CBA calculator tool offers a compilation of environmental and economic data to generate environment-related net present values of any project with impacts to the environment (GHG emissions or sequestrations).
•	The CBA_calculator tool is coded in Python which is a cross platform and a comprehensive extensible and editable language with a large community of users. The code is ex nihilo, completely self-contained. 
•	The structure of the code is simple with accessible input data to which it is possible to add or suppress one’s own trajectories (of prices, carbon stocks, etc).
•	The compensatory rate (see the paper for more information) can be calculated easily with the tool.
•	Note that constant returns to scale (biofuel production) are assumed in the tool.

## Data
Raw data from the public repository as listed above are first used in the “Data_CarbonStocks_Emissions” Excel file to generate (i) land use change carbon stock changes for the scenarios studied in the paper, and (ii) emissions from the process and cultivation of bioethanol. This data is then directly used in the tool (either in the “resources” folder or the code) which is described below. The output data is not directly provided but as explained below, it can be generated easily with the “ready-to-use” study cases provided.

## Materials and Methods
The tool is divided into three python files (whose extension is .py), namely core.py, tools.py and study_cases.py. Based on data located in the “resources” folder and in the body of the script itself (under the form of python-native dictionary). It generates three .xlsx files of results, namely “_quantities”, “_values”  and “_NPVs” all three located in a folder which is named by default according to the arguments involved in the computation.
core.py is the core script, while tools.py contains non-thematic-specific functions and classes. The two py-files are documented. 
The “resources” folder is composed of:
-	The “dluc” folder in which the dluc calculations are reported (see calculations in the provided “Data” Excel file). The .txt file indicates the units of data.
-	The “prices” folder which includes the carbon price trajectories scenarios. When only one-time prices are provided such as in the World Energy Outlook, there is an automatic process which extrapolates the values for each year in an exponential way. For example, if prices are provided at year 2020 and 2025, then the prices at 2021, 2022, 2023 and 2024 are generated in an exponential way. The .txt file provides the unit and year base for the monetary used in scenarios (e.g. EUR 2012).
-	The “yields” folder which has two folders:
o	The first, named “Input”, contains the yields necessary to the calculations: how much biofuel is produced from one tonne of feedstock (miscanthus or wheat) and how much biofuel can be produced per hectare.
o	The second one, named “Output”, is only instrumental and tautologically states than one tonne of biofuel is produced per tonne of output.
The results generated by the CBA calculator are composed of :
-	“_quantities.py”, which only displays the quantities associated to each flow, among which, emissions from the process of production, emissions from the cultivation of the feedstock, land use change impact from soil, land use change impact from biomass, etc.
-	“_values.py” which displays the monetary value of the different types of flows from both bioethanol and gasoline (“black”) depending of the carbon price scenario chosen in “study_case.py”.
-	“_NPVs” which displays the net present values for both the uniform and the differentiated annualizations for the different types of flow again. All titles specify what is calculated. Note that “ut” refers to bioethanol quantities in tonne and “um” refers to bioethanol quantities in megajoules (MJ).
Note that each column has a title that is explicit regarding what is calculated. When the prefix “ut_” appears in the title it means, it is calculated for one unit tonne of biofuel. When the prefix “um_” appears in the title, it means, it is calculated for one unit megajoule of biofuel. When nothing is specified, it takes into account the total quantity of biofuel produced. 
A requirement .txt file indicates the packages necessary to run the tool.

study_case.py is the script where scenarios arguments are formalized and where core.py is imported as a package and then used to execute calculations (e.g. a project evaluated over 20 years with time span of 20 years for both the soil and the vegetation, a classical GWP horizon of 100 years, a discount rate of 3% and scenario “A” for the price of carbon, grassland converted into an annual cropland). To run the tool, just press F5 from  a “study_cases” file. Among the files provided, there are several “study_cases” files: “study_cases_BASE” is the basic file with no specific scenario referring to the paper. For the sake of reproducibility, all the other study cases refer to scenarios used to generate each result of the paper.
Within each study case, you need to specify the scenario you are interested in. Below, I provide a description of all the categories that specify one scenario. Please refer to the file “study_cases_BASE.
-	run_name: here you can specify a title for the files that will be generated by the tool;
-	project_horizon: this is the time horizon of the project. It is set to 20 years in general since in the article I am interested in land use change impacts that are considered over 20 years by the European Commission;
-	T_so: this is the time horizon specific to land use change impacts related to the soil. It is here 20 years as assumed by the European Commission;
-	T_vg_diff: this is the time horizon specific to land use change impacts related to biomass assumed under the differentiated approach. According to the literature, it is assumed to be 1 year i.e. instantaneous impact;
-	T_vg_unif:. this is the time horizon specific to land use change impacts related to biomass assumed under the uniform approach. It is 20 years as assumed by the European Commission. 
-	discount_rate: this is the value of the discount rate chosen for your analysis.;
-	co2_prices_scenario: this is the carbon price scenario you need for your analysis. There are some well-known carbon price scenarios provided in the “resources” folder but you may want to add your own scenarios. In this case, please add a column to the .csv file “CO2_prices_FR” in the folder PyLUCCBA -> resources -> prices -> Exput. In this case, add the currency as well as the year base of the currency in the Exput.txt file in the same folder as for the other scenarios, as follows.
o	“name of the scenario”:unit: “currency”/ “quantity unit”
o	“name of the scenario”:yrb: “year”
-	initial_landuse: this is the initial land use before conversion into energy cropland. All the scenarios provided refer to specific carbon stocks for both soil and biomass. This data is gathered in the “CS_yields_FR” .csv file in the “dluc” folder in the “resources” folder. To change the scenario in the study case, enter the corresponding number which is in the square brackets. More accurately, [0] refers to the first land in brackets i.e. “FORESTLAND30”, [1] refers to “improved grassland”, [2] refers to “annual cropland”, [3] refers to “degraded grassland”. Note that you can add scenarios in the “CS_yields_FR” .csv file and add their name in the Python file inside the square brackets which contains the list of possible lands;	
-	final_landuse: this is the type of energy crop. There are only two options here ([0] for “miscanthus” and [1] for “wheat”), but, again, it can be extended to other types of lands via the “CS_yields_FR” .csv file;
-	input_flows_scenario: this is referring to the biofuel yield (see folder “Input” in folder “yields” itself in folder “resources”). Here, “CRISTANOL” is option [0] and refers to wheat-based bioethanol and “DOE” is option [1] and refers to miscanthus-based bioethanol. Other scenarios can be added to the .csv files again.

## How to use the two tools provided in the paper to support policy-making
-	To obtain the compensatory rate described in the article, please use the study case named “study_cases_Compensatory-Rate”. It will calculate the endogenous discount rate needed to cancel the difference between the uniform and the differentiated approach. The only difference of these study cases (there is one for Grassland and one for Forestland here) compared to the others is that the line “#cba = CBA_parameters_endogenizer(cba).ENDOGENOUS_discount_rate_which_equates_NPV_TOTAL_uniform_co2_flows_TO_NPV_TOTAL_differentiated_co2_flows” is not commented anymore in the code, which allows for the calculation of the compensatory rate. Once you click F5, the tool will display the compensatory rate corresponding to the scenario you chose in a new window. It will appear under the name “discount_rate” in the results window. Note that if you decide to calculate the compensatory rate, there is no need to specify an exogenous discount rate for your analysis since it will be automatically calculated to reach an equality between the net present value under the uniform approach and the net present value under the differentiated approach.
-	The carbon profitability payback period is also directly given in the results window once you press F5 (after specifying the scenario you are interested in). The carbon profitability payback period is the time from which the difference of NPVs between bioethanol and fossil fuel (black output) switches from a negative value to a positive value (involving greenhouse gas savings). The CBA calculator displays it directly. First, enter a “project_horizon” which is long enough to get a switch from a negative to a positive NPV (e.g. 150 years). Once you generate the results of a scenario (by pressing F5), the results window will display the payback periods related to both the uniform and the differentiated approaches. If it does not display any number, it means that the project horizon you entered is not long enough to get a switch form positive to negative values. Then, enter a longer project horizon and start again.

## Acknowledgements 
I am particularly grateful to Laurent Faucheux from CIRED for the coding of the CBA calculator I conceived. Researchers from l’Institut Français du Pétrole et des énergies nouvelles (Frédérique Bouvart, Cécile Querleu, Daphné Lorne, Pierre Collet) and from l’Institut National de la Recherche Agronomique (Serge Garcia, Stéphane de Cara Alexandra Niedwiedth, Raja Chakir) are also acknowledged for their valuable advice in the search for input data.


